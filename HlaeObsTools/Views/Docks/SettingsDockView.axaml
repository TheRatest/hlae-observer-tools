<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:HlaeObsTools.ViewModels.Docks"
             xmlns:conv="using:HlaeObsTools.Converters"
             xmlns:docks="using:HlaeObsTools.Views.Docks"
             x:Class="HlaeObsTools.Views.Docks.SettingsDockView"
             x:DataType="vm:SettingsDockViewModel">
    <UserControl.Resources>
        <conv:NullableDoubleTextConverter x:Key="NullableDouble" />
    </UserControl.Resources>
    <Grid>
        <Border Background="#1E1E1E" Padding="10" Focusable="True"
                IsVisible="{Binding !IsEditingAttachPresetAnimation}">
            <TabControl>

            <TabItem Header="General">
                <ScrollViewer>
                    <StackPanel Margin="10" Spacing="8">
                        <StackPanel Orientation="Horizontal"
                                    Spacing="6"
                                    Margin="0,8,0,0"
                                    VerticalAlignment="Center">
                            <ToggleSwitch IsChecked="{Binding IsDrawHudEnabled, Mode=TwoWay}"
                                        Content="Hide HUD"
                                        Foreground="#E6E6E6"
                                        Margin="0,0,10,0"/>
                            <ToggleSwitch IsChecked="{Binding IsOnlyDeathnotesEnabled, Mode=TwoWay}"
                                        Content="Only Deathnotices"
                                        Foreground="#E6E6E6"/>
                            <StackPanel Orientation="Vertical" Spacing="2" Margin="6,0,0,0">
                                <TextBlock Text="Force Deathnotices"
                                           Foreground="#E6E6E6"/>
                                <Button Command="{Binding CycleForceDeathnoticesCommand}"
                                        Content="{Binding ForceDeathnoticesLabel}"/>
                            </StackPanel>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal"
                                    Spacing="6"
                                    Margin="0,8,0,0"
                                    VerticalAlignment="Center">
                            <ToggleSwitch IsChecked="{Binding IsXrayEnabled, Mode=TwoWay}"
                                        Content="Show Xray"
                                        Foreground="#E6E6E6"
                                        Margin="0,0,10,0"/>
                            <ToggleSwitch IsChecked="{Binding UseAltPlayerBinds, Mode=TwoWay}"
                                        Content="Use alt player binds"
                                        Foreground="#E6E6E6"/>
                        </StackPanel>

                        <ToggleSwitch IsChecked="{Binding DisableFocusInputGate, Mode=TwoWay}"
                                      Content="Disable Focus Input-Gate"
                                      Foreground="#E6E6E6"/>
                        <Button Content="DemoUI"
                                Command="{Binding ToggleDemouiCommand}"/>

                        <Separator Margin="0,10,0,6"/>
                        <TextBlock Text="Network Endpoints"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"/>

                        <Grid ColumnDefinitions="Auto,*,Auto,*"
                            RowDefinitions="Auto,Auto,Auto"
                            ColumnSpacing="8"
                            RowSpacing="6">
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="WS/UDP Host" Foreground="#AAAAAA"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="3" Text="{Binding WebSocketHost, Mode=TwoWay}" />

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="WS Port" Foreground="#AAAAAA"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding WebSocketPort, Mode=TwoWay}" />
                            <TextBlock Grid.Row="1" Grid.Column="2" Text="UDP Port" Foreground="#AAAAAA"/>
                            <TextBox Grid.Row="1" Grid.Column="3" Grid.ColumnSpan="3" Text="{Binding UdpPort, Mode=TwoWay}" />

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="RTP Port" Foreground="#AAAAAA"/>
                            <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding RtpPort, Mode=TwoWay}" />
                            <TextBlock Grid.Row="2" Grid.Column="2" Text="GSI Port" Foreground="#AAAAAA"/>
                            <TextBox Grid.Row="2" Grid.Column="3" Grid.ColumnSpan="3" Text="{Binding GsiPort, Mode=TwoWay}" />
                        </Grid>

                        <Button Content="Apply / Reconnect"
                                Command="{Binding ApplyNetworkSettingsCommand}"
                                Margin="0,6,0,0"/>

                        <Separator Margin="0,10,0,6"/>
                        <TextBlock Text="vMix Replay"
                                   Foreground="#CCCCCC"
                                   FontWeight="SemiBold"/>
                        <StackPanel Spacing="6">
                            <ToggleSwitch IsChecked="{Binding VmixReplaySettings.Enabled, Mode=TwoWay}"
                                          Content="Enable vMix replay markers"
                                          Foreground="#E6E6E6"/>
                            <Grid ColumnDefinitions="Auto,Auto,Auto,Auto"
                                  RowDefinitions="Auto,Auto,Auto"
                                  ColumnSpacing="8"
                                  RowSpacing="6">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Host" Foreground="#AAAAAA"/>
                                <TextBox Grid.Row="0" Grid.Column="1" HorizontalAlignment="Left" MaxWidth="120" MinWidth="100" Text="{Binding VmixReplaySettings.Host, Mode=TwoWay}" />
                                <TextBlock Grid.Row="0" Grid.Column="2" HorizontalAlignment="Left" Text="Port" Foreground="#AAAAAA"/>
                                <TextBox Grid.Row="0" Grid.Column="3" HorizontalAlignment="Left" MaxWidth="80" Text="{Binding VmixReplaySettings.Port, Mode=TwoWay}" />

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Pre-roll (s)" Foreground="#AAAAAA"/>
                                <TextBox Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" MaxWidth="80" Text="{Binding VmixReplaySettings.PreSeconds, Mode=TwoWay}" />
                                <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Left" Text="Post-roll (s)" Foreground="#AAAAAA"/>
                                <TextBox Grid.Row="1" Grid.Column="3" HorizontalAlignment="Left" MaxWidth="80" Text="{Binding VmixReplaySettings.PostSeconds, Mode=TwoWay}" />

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Extend window (s)" Foreground="#AAAAAA"/>
                                <TextBox Grid.Row="2" Grid.Column="1" HorizontalAlignment="Left" MaxWidth="80" Text="{Binding VmixReplaySettings.ExtendWindowSeconds, Mode=TwoWay}" />
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Create">
                    <ScrollViewer>
                    <StackPanel Margin="10" Spacing="8">

                        <StackPanel Orientation="Horizontal"
                                    Spacing="6"
                                    Margin="0,8,0,0"
                                    VerticalAlignment="Center">
                            <ToggleSwitch IsChecked="{Binding IsCameraPathPreviewEnabled, Mode=TwoWay}"
                                        Content="Enable path preview"
                                        Foreground="#E6E6E6"
                                        HorizontalAlignment="Left"
                                        Margin="0,0,10,0"/>
                            <ToggleSwitch IsChecked="{Binding IsCampathEnabled, Mode=TwoWay}"
                                            Content="Campath enabled"
                                            Foreground="#E6E6E6"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal"
                                    Spacing="6"
                                    Margin="0,8,0,0"
                                    VerticalAlignment="Center">
                            <Button Content="Add point"
                                    Command="{Binding AddPointCommand}"/>
                            <Button Content="Clear"
                                    Command="{Binding ClearCampathCommand}"/>
                            <Button Content="Goto Start"
                                    Command="{Binding GotoStartCommand}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal"
                                    Spacing="6"
                                    Margin="0,4,0,0"
                                    VerticalAlignment="Center">
                            <Button Content="{Binding InterpLabel}"
                                    Command="{Binding ToggleInterpModeCommand}"/>
                            <Button Content="Load Campath"
                                    Command="{Binding LoadCampathCommand}"/>
                            <Button Content="Save Campath"
                                    Command="{Binding SaveCampathCommand}"/>
                        </StackPanel>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Radar">
                <ScrollViewer>
                    <StackPanel Margin="10" Spacing="10">
                        <TextBlock Text="Marker size"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                            <Slider Minimum="0.5"
                                    Maximum="2.5"
                                    SmallChange="0.05"
                                    LargeChange="0.25"
                                    Width="200"
                                    Value="{Binding RadarSettings.MarkerScale, Mode=TwoWay}"/>
                            <TextBlock Text="{Binding RadarSettings.MarkerScale, StringFormat={}{0:F2}}"
                                    Width="50"
                                    Foreground="#E6E6E6"/>
                        </StackPanel>
                        <TextBlock Text="Adjusts player marker size on the radar."
                                Foreground="#888888"
                                FontSize="12"/>
                        <TextBlock Text="Height scale strength"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
                            <Slider Minimum="0"
                                    Maximum="2"
                                    SmallChange="0.05"
                                    LargeChange="0.25"
                                    Width="200"
                                    Value="{Binding RadarSettings.HeightScaleMultiplier, Mode=TwoWay}"/>
                            <TextBlock Text="{Binding RadarSettings.HeightScaleMultiplier, StringFormat={}{0:F2}}"
                                    Width="50"
                                    Foreground="#E6E6E6"/>
                        </StackPanel>
                        <TextBlock Text="Controls how strongly height affects marker scale."
                                Foreground="#888888"
                                FontSize="12"/>
                        <ToggleSwitch IsChecked="{Binding RadarSettings.DisplayNumbersTopmost, Mode=TwoWay}"
                                    Content="Observer-Slot on top"
                                    Foreground="#E6E6E6"/>
                        <ToggleSwitch IsChecked="{Binding RadarSettings.ShowPlayerNames, Mode=TwoWay}"
                                    Content="Show player names"
                                    Foreground="#E6E6E6"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <TabItem Header="HUD">
                <ScrollViewer>
                    <StackPanel Margin="10" Spacing="10">
                        <TextBlock Text="Video HUD Overlay"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"/>
                        <ToggleSwitch IsChecked="{Binding HudSettings.IsHudEnabled, Mode=TwoWay}"
                                    Content="Enable HUD"
                                    Foreground="#E6E6E6"/>
                        <ToggleSwitch IsChecked="{Binding HudSettings.ShowKillfeed, Mode=TwoWay}"
                                    Content="Show killfeed"
                                    Foreground="#E6E6E6"/>
                        <ToggleSwitch IsChecked="{Binding HudSettings.ShowKillfeedAttackerSlot, Mode=TwoWay}"
                                    Content="Show killfeed attacker bind"
                                    Foreground="#E6E6E6"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="3D">
                <ScrollViewer>
                    <StackPanel Margin="10" Spacing="10">
                        <TextBlock Text="Map file"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"/>
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <TextBox Width="320"
                                    Text="{Binding Viewport3DSettings.MapObjPath, Mode=TwoWay}"
                                    Watermark="path\\to\\map.vmap_c or map.vpk"/>
                            <Button Content="Browse"
                                    Command="{Binding BrowseMapObjCommand}"/>
                            <Button Content="Clear"
                                    Command="{Binding ClearMapObjCommand}"/>
                        </StackPanel>
                        <TextBlock Text="Load a Source 2 map (.vmap_c or .vpk)."
                                Foreground="#888888"
                                FontSize="12"/>
                        <TextBlock Text="Viewport mouse scale"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"
                                Margin="0,10,0,0"/>
                        <TextBox Width="120"
                                Text="{Binding Viewport3DSettings.ViewportMouseScale, Mode=TwoWay}"
                                Watermark="1.0"
                                HorizontalAlignment="Left" />

                        <TextBlock Text="Viewport FPS cap (0 = uncapped)"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"
                                Margin="0,10,0,0"/>
                        <TextBox Width="120"
                                Text="{Binding Viewport3DSettings.ViewportFpsCap, Mode=TwoWay}"
                                Watermark="60"
                                HorizontalAlignment="Left" />

                        <TextBlock Text="Rendering"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"
                                Margin="0,10,0,0"/>
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.PostprocessEnabled, Mode=TwoWay}"
                                        Content="Postprocess"
                                        Foreground="#E6E6E6"/>
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.ColorCorrectionEnabled, Mode=TwoWay}"
                                        Content="Color correction"
                                        Foreground="#E6E6E6"/>
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.DynamicShadowsEnabled, Mode=TwoWay}"
                                        Content="Dynamic shadows"
                                        Foreground="#E6E6E6"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="10">
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.WireframeEnabled, Mode=TwoWay}"
                                        Content="Wireframe"
                                        Foreground="#E6E6E6"/>
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.SkipWaterEnabled, Mode=TwoWay}"
                                        Content="Skip water"
                                        Foreground="#E6E6E6"/>
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.SkipTranslucentEnabled, Mode=TwoWay}"
                                        Content="Skip translucents"
                                        Foreground="#E6E6E6"/>
                            <ToggleSwitch IsChecked="{Binding Viewport3DSettings.ShowFps, Mode=TwoWay}"
                                        Content="Show FPS"
                                        Foreground="#E6E6E6"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,6,0,0">
                            <StackPanel Orientation="Vertical" Spacing="4">
                                <TextBlock Text="Render mode"
                                        Foreground="#CCCCCC"
                                        FontWeight="SemiBold"/>
                                <ComboBox Width="180"
                                        ItemsSource="{Binding Viewport3DSettings.RenderModeOptions}"
                                        SelectedItem="{Binding Viewport3DSettings.RenderMode, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Spacing="4">
                                <TextBlock Text="Shadow resolution"
                                        Foreground="#CCCCCC"
                                        FontWeight="SemiBold"/>
                                <ComboBox Width="120"
                                        ItemsSource="{Binding Viewport3DSettings.ShadowTextureSizeOptions}"
                                        SelectedItem="{Binding Viewport3DSettings.ShadowTextureSize, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" Spacing="4">
                                <TextBlock Text="Max texture size"
                                        Foreground="#CCCCCC"
                                        FontWeight="SemiBold"/>
                                <ComboBox Width="120"
                                        ItemsSource="{Binding Viewport3DSettings.MaxTextureSizeOptions}"
                                        SelectedItem="{Binding Viewport3DSettings.MaxTextureSize, Mode=TwoWay}"/>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Text="Map scale"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"
                                Margin="0,10,0,0"/>
                        <TextBox Width="120"
                                Text="{Binding Viewport3DSettings.MapScale, Mode=TwoWay}"
                                Watermark="1.0"
                                HorizontalAlignment="Left" />

                        <TextBlock Text="Map rotation (deg)"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"
                                Margin="0,10,0,0"/>
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <TextBox Width="80" Watermark="Yaw" Text="{Binding Viewport3DSettings.MapYaw, Mode=TwoWay}" />
                            <TextBox Width="80" Watermark="Pitch" Text="{Binding Viewport3DSettings.MapPitch, Mode=TwoWay}" />
                            <TextBox Width="80" Watermark="Roll" Text="{Binding Viewport3DSettings.MapRoll, Mode=TwoWay}" />
                        </StackPanel>

                        <TextBlock Text="Map offset"
                                Foreground="#CCCCCC"
                                FontWeight="SemiBold"
                                Margin="0,10,0,0"/>
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <TextBox Width="80" Watermark="X" Text="{Binding Viewport3DSettings.MapOffsetX, Mode=TwoWay}" />
                            <TextBox Width="80" Watermark="Y" Text="{Binding Viewport3DSettings.MapOffsetY, Mode=TwoWay}" />
                            <TextBox Width="80" Watermark="Z" Text="{Binding Viewport3DSettings.MapOffsetZ, Mode=TwoWay}" />
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,10,0,0">

                            <StackPanel Orientation="Vertical" Spacing="4">
                                <TextBlock Text="Pin scale"
                                        Foreground="#CCCCCC"
                                        FontWeight="SemiBold"/>
                                <TextBox Width="120"
                                        Text="{Binding Viewport3DSettings.PinScale, Mode=TwoWay}"
                                        Watermark="1.0"/>
                            </StackPanel>

                            <StackPanel Orientation="Vertical" Spacing="4">
                                <TextBlock Text="Pin Z offset"
                                        Foreground="#CCCCCC"
                                        FontWeight="SemiBold"/>
                                <TextBox Width="120"
                                        Text="{Binding Viewport3DSettings.PinOffsetZ, Mode=TwoWay}"
                                        Watermark="Z"/>
                            </StackPanel>

                        </StackPanel>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Header="Actions">
                <TabControl Margin="10">
                    <TabItem Header="Attach">
                        <ScrollViewer>
                            <StackPanel Margin="10" Spacing="12">
                                <TextBlock Text="Attach Presets"
                                           Foreground="#CCCCCC"
                                           FontWeight="SemiBold"/>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="Page" Foreground="#AAAAAA" VerticalAlignment="Center"/>
                                    <ComboBox Width="160"
                                              ItemsSource="{Binding AttachPresetPageOptions}"
                                              SelectedIndex="{Binding ActiveAttachPresetPage, Mode=TwoWay}"/>
                                </StackPanel>
                                <ItemsControl ItemsSource="{Binding AttachPresets}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#333" BorderThickness="1" Padding="8" Margin="0,0,0,8">
                                                <StackPanel Spacing="6">
                                                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                                                        <StackPanel Spacing="2">
                                                            <TextBlock Text="{Binding Title}" Foreground="#E6E6E6" FontWeight="SemiBold"/>
                                                            <TextBlock Text="{Binding AnimationSummary}" Foreground="#888888" FontSize="12"/>
                                                        </StackPanel>
                                                        <Button Grid.Column="1"
                                                                Content="Animation"
                                                                Click="OpenAnimationEditor_Click"
                                                                HorizontalAlignment="Right"/>
                                                    </Grid>
                                                    <TextBlock Text="Preset Name" Foreground="#AAAAAA" FontSize="12"/>
                                                    <TextBox Width="300"
                                                             Watermark="Preset name"
                                                             Text="{Binding Name, Mode=TwoWay}"
                                                             HorizontalAlignment="Left" />
                                                    <TextBlock Text="Attachment" Foreground="#AAAAAA" FontSize="12"/>
                                                    <ComboBox ItemsSource="{Binding AttachmentOptions}"
                                                              SelectedItem="{Binding AttachmentName, Mode=TwoWay}"
                                                              Width="300"
                                                              HorizontalAlignment="Left"/>

                                                    <TextBlock Text="Position Offset" Foreground="#AAAAAA" FontSize="12"/>
                                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                                        <TextBox Width="80" Watermark="X" Text="{Binding OffsetPosX, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                        <TextBox Width="80" Watermark="Y" Text="{Binding OffsetPosY, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                        <TextBox Width="80" Watermark="Z" Text="{Binding OffsetPosZ, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                    </StackPanel>

                                                    <TextBlock Text="Rotation Offset (deg)" Foreground="#AAAAAA" FontSize="12"/>
                                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                                        <TextBox Width="80" Watermark="Pitch" Text="{Binding OffsetPitch, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                        <TextBox Width="80" Watermark="Yaw" Text="{Binding OffsetYaw, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                        <TextBox Width="80" Watermark="Roll" Text="{Binding OffsetRoll, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                    </StackPanel>

                                                    <TextBlock Text="Rotation Basis" Foreground="#AAAAAA" FontSize="12"/>
                                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                                        <ComboBox Width="80"
                                                            ItemsSource="{Binding RotationBasisOptions}"
                                                            SelectedItem="{Binding RotationBasisPitch, Mode=TwoWay}"/>
                                                        <ComboBox Width="80"
                                                            ItemsSource="{Binding RotationBasisOptions}"
                                                            SelectedItem="{Binding RotationBasisYaw, Mode=TwoWay}"/>
                                                        <ComboBox Width="80"
                                                            ItemsSource="{Binding RotationBasisOptions}"
                                                            SelectedItem="{Binding RotationBasisRoll, Mode=TwoWay}"/>
                                                    </StackPanel>

                                                    <TextBlock Text="Rotation Reference" Foreground="#AAAAAA" FontSize="12"/>
                                                    <ComboBox Width="200"
                                                              ItemsSource="{Binding RotationReferenceOptions}"
                                                              SelectedItem="{Binding RotationReference, Mode=TwoWay}"/>

                                                    <TextBlock Text="Rotation Axis Lock (world)" Foreground="#AAAAAA" FontSize="12"/>
                                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                                        <ToggleSwitch Content="Pitch"
                                                                      IsChecked="{Binding RotationLockPitch, Mode=TwoWay}"
                                                                      Foreground="#E6E6E6"/>
                                                        <ToggleSwitch Content="Yaw"
                                                                      IsChecked="{Binding RotationLockYaw, Mode=TwoWay}"
                                                                      Foreground="#E6E6E6"/>
                                                        <ToggleSwitch Content="Roll"
                                                                      IsChecked="{Binding RotationLockRoll, Mode=TwoWay}"
                                                                      Foreground="#E6E6E6"/>
                                                    </StackPanel>

                                                    <TextBlock Text="FOV" Foreground="#AAAAAA" FontSize="12"/>
                                                    <TextBox Width="100" Watermark="90" HorizontalAlignment="Left" Text="{Binding Fov, Mode=TwoWay, Converter={StaticResource NullableDouble}}" />
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <TabItem Header="Action 2">
                        <StackPanel Margin="10">
                            <TextBlock Text="Placeholder for Action 2" Foreground="#888888"/>
                        </StackPanel>
                    </TabItem>
                    <TabItem Header="Action 3">
                        <StackPanel Margin="10">
                            <TextBlock Text="Placeholder for Action 3" Foreground="#888888"/>
                        </StackPanel>
                    </TabItem>
                    <TabItem Header="Action 4">
                        <StackPanel Margin="10">
                            <TextBlock Text="Placeholder for Action 4" Foreground="#888888"/>
                        </StackPanel>
                    </TabItem>
                    <TabItem Header="Action 5">
                        <StackPanel Margin="10">
                            <TextBlock Text="Placeholder for Action 5" Foreground="#888888"/>
                        </StackPanel>
                    </TabItem>
                </TabControl>
            </TabItem>

            <TabItem Header="Freecam">
                <TabControl Margin="10">
                    <TabItem Header="Camera">
                        <ScrollViewer>
                            <Grid Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Left Column: Mouse and Movement Settings -->
                                <StackPanel Grid.Column="0" Spacing="12">

                                    <!-- Mouse Settings -->
                                    <TextBlock Text="Mouse Settings"
                                               Foreground="#CCCCCC"
                                               FontWeight="SemiBold"
                                               Margin="0,8,0,0"/>

                                    <StackPanel Spacing="8">
                                        <TextBlock Text="Mouse Sensitivity"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="0.01"
                                                    Maximum="1.0"
                                                    SmallChange="0.01"
                                                    LargeChange="0.1"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.MouseSensitivity, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.MouseSensitivity, StringFormat={}{0:F3}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>
                                    </StackPanel>

                                    <ToggleSwitch IsChecked="{Binding FreecamSettings.ClampPitch, Mode=TwoWay}"
                                                  Content="Clamp Pitch"
                                                  Foreground="#E6E6E6"/>

                                    <!-- Movement Settings -->
                                    <TextBlock Text="Movement Settings"
                                               Foreground="#CCCCCC"
                                               FontWeight="SemiBold"
                                               Margin="0,8,0,0"/>

                                    <StackPanel Spacing="8">
                                        <TextBlock Text="Move Speed"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="10.0"
                                                    Maximum="1000.0"
                                                    SmallChange="10.0"
                                                    LargeChange="50.0"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.MoveSpeed, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.MoveSpeed, StringFormat={}{0:F0}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>

                                        <TextBlock Text="Sprint Multiplier"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="1.0"
                                                    Maximum="5.0"
                                                    SmallChange="0.1"
                                                    LargeChange="0.5"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.SprintMultiplier, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.SprintMultiplier, StringFormat={}{0:F1}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>

                                        <TextBlock Text="Vertical Speed"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="10.0"
                                                    Maximum="1000.0"
                                                    SmallChange="10.0"
                                                    LargeChange="50.0"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.VerticalSpeed, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.VerticalSpeed, StringFormat={}{0:F0}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>

                                        <TextBlock Text="Speed Adjust Rate"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="1.0"
                                                    Maximum="2.0"
                                                    SmallChange="0.01"
                                                    LargeChange="0.1"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.SpeedAdjustRate, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.SpeedAdjustRate, StringFormat={}{0:F2}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>

                                        <TextBlock Text="Speed Min Multiplier"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="0.01"
                                                    Maximum="1.0"
                                                    SmallChange="0.01"
                                                    LargeChange="0.1"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.SpeedMinMultiplier, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.SpeedMinMultiplier, StringFormat={}{0:F2}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>

                                        <TextBlock Text="Speed Max Multiplier"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Orientation="Horizontal" Spacing="10">
                                            <Slider Minimum="1.0"
                                                    Maximum="10.0"
                                                    SmallChange="0.5"
                                                    LargeChange="1.0"
                                                    Width="200"
                                                    Value="{Binding FreecamSettings.SpeedMaxMultiplier, Mode=TwoWay}"/>
                                            <TextBlock Text="{Binding FreecamSettings.SpeedMaxMultiplier, StringFormat={}{0:F1}}"
                                                       Width="50"
                                                       Foreground="#E6E6E6"/>
                                        </StackPanel>
                                    </StackPanel>
                                    
                                <!-- Smoothing Settings -->
                                <TextBlock Text="Smoothing Settings"
                                           Foreground="#CCCCCC"
                                           FontWeight="SemiBold"
                                           Margin="0,8,0,0"/>

                                <StackPanel Spacing="8">
                                    <ToggleSwitch IsChecked="{Binding FreecamSettings.SmoothEnabled, Mode=TwoWay}"
                                                  Content="Enable Smoothing"
                                                  Foreground="#E6E6E6"/>
                                    <ToggleSwitch IsChecked="{Binding FreecamSettings.RotCriticalDamping, Mode=TwoWay}"
                                                  Content="Use Damping (Rotation)"
                                                  Foreground="#E6E6E6"/>
                                    <TextBlock Text="Rotation Damping Ratio (>= 1.0)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="1.0"
                                                Maximum="5.0"
                                                SmallChange="0.1"
                                                LargeChange="0.5"
                                                Width="200"
                                                Value="{Binding FreecamSettings.RotDampingRatio, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.RotDampingRatio, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Position Smoothing Half-time (seconds)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.05"
                                                Maximum="2.0"
                                                SmallChange="0.05"
                                                LargeChange="0.1"
                                                Width="200"
                                                Value="{Binding FreecamSettings.HalfVec, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.HalfVec, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Rotation Smoothing Half-time (seconds)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.05"
                                                Maximum="2.0"
                                                SmallChange="0.05"
                                                LargeChange="0.1"
                                                Width="200"
                                                Value="{Binding FreecamSettings.HalfRot, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.HalfRot, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="FOV Smoothing Half-time (seconds)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.05"
                                                Maximum="2.0"
                                                SmallChange="0.05"
                                                LargeChange="0.1"
                                                Width="200"
                                                Value="{Binding FreecamSettings.HalfFov, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.HalfFov, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Player Lock Half-time (seconds)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.05"
                                                Maximum="2.0"
                                                SmallChange="0.05"
                                                LargeChange="0.1"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LockHalfRot, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LockHalfRot, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Player Lock Half-time Transition (seconds)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.05"
                                                Maximum="2.0"
                                                SmallChange="0.05"
                                                LargeChange="0.1"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LockHalfRotTransition, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LockHalfRotTransition, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>
                                                                
                                </StackPanel>

                                </StackPanel>

                                <!-- Right Column: Roll, FOV, and Smoothing Settings -->
                                <StackPanel Grid.Column="2" Spacing="12">

                                    <!-- Roll Settings -->
                                <TextBlock Text="Roll Settings"
                                           Foreground="#CCCCCC"
                                           FontWeight="SemiBold"
                                           Margin="0,8,0,0"/>

                                <StackPanel Spacing="8">
                                    <TextBlock Text="Roll Speed"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="10.0"
                                                Maximum="180.0"
                                                SmallChange="5.0"
                                                LargeChange="15.0"
                                                Width="200"
                                                Value="{Binding FreecamSettings.RollSpeed, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.RollSpeed, StringFormat={}{0:F0}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Roll Smoothing"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.0"
                                                Maximum="1.0"
                                                SmallChange="0.05"
                                                LargeChange="0.1"
                                                Width="200"
                                                Value="{Binding FreecamSettings.RollSmoothing, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.RollSmoothing, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Lean Strength"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.0"
                                                Maximum="2.0"
                                                SmallChange="0.1"
                                                LargeChange="0.5"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LeanStrength, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LeanStrength, StringFormat={}{0:F1}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Lean Accel Scale"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.0"
                                                Maximum="0.1"
                                                SmallChange="0.001"
                                                LargeChange="0.01"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LeanAccelScale, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LeanAccelScale, StringFormat={}{0:F4}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Lean Velocity Scale"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.0"
                                                Maximum="0.1"
                                                SmallChange="0.001"
                                                LargeChange="0.01"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LeanVelocityScale, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LeanVelocityScale, StringFormat={}{0:F3}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Lean Max Angle"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.0"
                                                Maximum="45.0"
                                                SmallChange="1.0"
                                                LargeChange="5.0"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LeanMaxAngle, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LeanMaxAngle, StringFormat={}{0:F0}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Lean Half-time (seconds)"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.01"
                                                Maximum="1.0"
                                                SmallChange="0.01"
                                                LargeChange="0.05"
                                                Width="200"
                                                Value="{Binding FreecamSettings.LeanHalfTime, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.LeanHalfTime, StringFormat={}{0:F2}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- FOV Settings -->
                                <TextBlock Text="FOV Settings"
                                           Foreground="#CCCCCC"
                                           FontWeight="SemiBold"
                                           Margin="0,8,0,0"/>

                                <StackPanel Spacing="8">
                                    <TextBlock Text="FOV Min"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="5.0"
                                                Maximum="90.0"
                                                SmallChange="1.0"
                                                LargeChange="5.0"
                                                Width="200"
                                                Value="{Binding FreecamSettings.FovMin, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.FovMin, StringFormat={}{0:F0}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="FOV Max"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="90.0"
                                                Maximum="180.0"
                                                SmallChange="5.0"
                                                LargeChange="10.0"
                                                Width="200"
                                                Value="{Binding FreecamSettings.FovMax, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.FovMax, StringFormat={}{0:F0}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="FOV Step"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="0.5"
                                                Maximum="10.0"
                                                SmallChange="0.5"
                                                LargeChange="1.0"
                                                Width="200"
                                                Value="{Binding FreecamSettings.FovStep, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.FovStep, StringFormat={}{0:F1}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>

                                    <TextBlock Text="Default FOV"
                                               Foreground="#CCCCCC"/>
                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <Slider Minimum="60.0"
                                                Maximum="120.0"
                                                SmallChange="1.0"
                                                LargeChange="5.0"
                                                Width="200"
                                                Value="{Binding FreecamSettings.DefaultFov, Mode=TwoWay}"/>
                                        <TextBlock Text="{Binding FreecamSettings.DefaultFov, StringFormat={}{0:F0}}"
                                                   Width="50"
                                                   Foreground="#E6E6E6"/>
                                    </StackPanel>
                                </StackPanel>
                                <!-- Hold Settings -->
                                <TextBlock Text="Hold Settings"
                                            Foreground="#CCCCCC"
                                            FontWeight="SemiBold"
                                            Margin="0,8,0,0"/>
                                <ToggleSwitch IsChecked="{Binding FreecamSettings.HoldMovementFollowsCamera, Mode=TwoWay}"
                                                Content="Hold follows camera rotation"
                                                Foreground="#E6E6E6"/>
                                <Button Content="Reset to Default"
                                        Command="{Binding ResetFreecamSettingsCommand}"
                                        HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Grid>
                        </ScrollViewer>
                    </TabItem>
                    <TabItem Header="Controls">
                        <ScrollViewer>
                            <StackPanel Margin="10" Spacing="10">
                                <TextBlock Text="Analog Keyboard"
                                           Foreground="#CCCCCC"
                                           FontWeight="SemiBold"/>
                                <ToggleSwitch IsChecked="{Binding FreecamSettings.AnalogKeyboardEnabled, Mode=TwoWay}"
                                              Content="Enable analog keyboard mode"
                                              Foreground="#E6E6E6"/>
                                <TextBlock Text="Left Stick Deadzone"
                                           Foreground="#CCCCCC"/>
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <Slider Minimum="0.0"
                                            Maximum="0.5"
                                            SmallChange="0.01"
                                            LargeChange="0.05"
                                            Width="200"
                                            Value="{Binding FreecamSettings.AnalogLeftDeadzone, Mode=TwoWay}"/>
                                    <TextBlock Text="{Binding FreecamSettings.AnalogLeftDeadzone, StringFormat={}{0:F2}}"
                                               Width="50"
                                               Foreground="#E6E6E6"/>
                                </StackPanel>

                                <TextBlock Text="Right Stick Deadzone"
                                           Foreground="#CCCCCC"/>
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <Slider Minimum="0.0"
                                            Maximum="0.5"
                                            SmallChange="0.01"
                                            LargeChange="0.05"
                                            Width="200"
                                            Value="{Binding FreecamSettings.AnalogRightDeadzone, Mode=TwoWay}"/>
                                    <TextBlock Text="{Binding FreecamSettings.AnalogRightDeadzone, StringFormat={}{0:F2}}"
                                               Width="50"
                                               Foreground="#E6E6E6"/>
                                </StackPanel>

                                <TextBlock Text="Analog Curve"
                                           Foreground="#CCCCCC"/>
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <Slider Minimum="0.0"
                                            Maximum="1.0"
                                            SmallChange="0.05"
                                            LargeChange="0.1"
                                            Width="200"
                                            Value="{Binding FreecamSettings.AnalogCurve, Mode=TwoWay}"/>
                                    <TextBlock Text="{Binding FreecamSettings.AnalogCurve, StringFormat={}{0:F2}}"
                                               Width="50"
                                               Foreground="#E6E6E6"/>
                                </StackPanel>

                                <TextBlock Text="Sprint uses right stick X+."
                                           Foreground="#888888"
                                           FontSize="12"/>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </TabItem>

            </TabControl>
        </Border>

        <Border Background="#1E1E1E" Padding="10" Focusable="True"
                IsVisible="{Binding IsEditingAttachPresetAnimation}">
            <Grid RowDefinitions="Auto,*" RowSpacing="10">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button Content="Back"
                            Command="{Binding CloseAttachPresetAnimationCommand}"/>
                    <TextBlock Text="{Binding AttachPresetAnimationEditor.Title}"
                               Foreground="#E6E6E6"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                </StackPanel>
                <docks:AttachPresetAnimationDockView Grid.Row="1"
                                                     DataContext="{Binding AttachPresetAnimationEditor}"/>
            </Grid>
        </Border>
    </Grid>
</UserControl>

